<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed Materials - Property of IBM
    5725-I43 (C) Copyright IBM Corp. 2011, 2016. All Rights Reserved.
    US Government Users Restricted Rights - Use, duplication or
    disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

-->

<project basedir="." default="help">

  <!-- Start of Property Parameters Generated by MobileFirst -->
  <property name="mfp.server.install.dir" value="/opt/IBM/MobileFirst_Platform_Server"/>
  <property name="mfp.analytics.default.user" value="admin"/>
  <property name="mfp.analytics.default.user.password" value="admin"/>
  <property name="mfp.analytics.shards" value="5"/>
  <property name="appserver.was.installdir" value="/Installers/Liberty/wlp"/>
  <property name="appserver.was.profile" value="Liberty"/>
  <property name="appserver.was85liberty.serverInstance" value="mfp"/>
  <!--
	Use this property in the following cases :
	1) For an installation on a WAS ND cluster,
	   in case a server is added or removed from the cluster
	2) For an installation on any other WAS topology or a supported standalone application server,
	   in case other master nodes are already defined in your ElasticSearch cluster.
  -->
  <!--
  <property name="mfp.analytics.masters.list" value="****UPDATE**** - IBM MobileFirst Operational Analytics (example: hostname1:port1,hostname2:port2)"/>
  -->
  <!-- End of Property Parameters Generated by MobileFirst -->

  <!-- Meta properties for internal use -->
  <property name="mfp.config.parameters.version" value="1.0"/>

  <taskdef resource="com/ibm/mfp/ant/defaults.properties">
    <classpath>
      <fileset dir="${mfp.server.install.dir}/MobileFirstServer">
        <include name="mfp-ant-deployer.jar"/>
      </fileset>
    </classpath>
  </taskdef>

  <!-- Start of the install target Generated by MobileFirst Server for MobileFirst Operational Analytics -->
  <target name="install">
    <installanalytics>
      <console/>
      <storage>
      	<!-- Add this attribute to the <elasticsearch> element if you uncommented property mfp.analytics.masters.list
      	  mastersList="${mfp.analytics.masters.list}"
      	-->
      	<elasticsearch shards="${mfp.analytics.shards}"/>
      </storage>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${mfp.analytics.default.user}" role="analytics_administrator" password="${mfp.analytics.default.user.password}"/>
    </installanalytics>
  </target>
  <!-- End of the install target Generated by MobileFirst Server -->

  <!-- Start of the update target Generated by MobileFirst Server for MobileFirst Operational Analytics -->
  <target name="update">
    <updateanalytics>
      <console/>
      <storage>
      	<!-- Add this attribute to the <elasticsearch> element if you uncommented property mfp.analytics.masters.list
      	  mastersList="${mfp.analytics.masters.list}"
      	-->
      	<elasticsearch shards="${mfp.analytics.shards}"/>
      </storage>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${mfp.analytics.default.user}" role="analytics_administrator" password="${mfp.analytics.default.user.password}"/>
    </updateanalytics>
  </target>
  <!-- End of the update target Generated by MobileFirst Server -->

  <!-- Start of the uninstall target Generated by MobileFirst Server for MobileFirst Operational Analytics  -->
  <target name="uninstall">
    <uninstallanalytics>
      <console/>
      <storage>
      	<!-- Add this attribute to the <elasticsearch> element if you uncommented property mfp.analytics.masters.list
      	  mastersList="${mfp.analytics.masters.list}"
      	-->
      	<elasticsearch shards="${mfp.analytics.shards}"/>
      </storage>
      <applicationserver>
        <websphereapplicationserver installdir="${appserver.was.installdir}"
                                    profile="${appserver.was.profile}">
          <server name="${appserver.was85liberty.serverInstance}"/>
        </websphereapplicationserver>
      </applicationserver>
      <user name="${mfp.analytics.default.user}" role="analytics_administrator" password="${mfp.analytics.default.user.password}"/>
    </uninstallanalytics>
  </target>
  <!-- End of the uninstall target Generated by MobileFirst Server -->

  <target name="help">
    <basename property="ant.file.basename" file="${ant.file}"/>
    <echo message="This ant project file can be used in the following ways:"/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} install"/>
    <echo message="Adds a MobileFirst Operational Analytics environment on the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} update"/>
    <echo message="Updates an installed MobileFirst Operational Analytics Services and Console WAR files in the application server."/>
    <echo/>
    <echo message="ant -f ${ant.file.basename} uninstall"/>
    <echo message="Uninstalls a MobileFirst Operational Analytics environment from the application server."/>
    <echo/>
  </target>
</project>
